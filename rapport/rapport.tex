\documentclass[12pt]{article}

\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[french]{babel}
\usepackage{hyperref}
\usepackage{lastpage}
\usepackage{graphicx}
\usepackage{listings}
\usepackage{subfig}


\begin{document}
\begin{titlepage}
\newcommand{\HRule}{\rule{\linewidth}{0.5mm}}
\setlength{\topmargin}{0in}
\begin{minipage}{0.4\textwidth}
	\begin{flushleft} \large
		\hspace*{-0.5cm}
		\includegraphics[scale=0.20]{./ressources/logo-unicaen.jpg}
	\end{flushleft}
\end{minipage}
\center
\textsc{\large }\\[0.5cm]
\HRule \\[0.4cm]
{ \huge \bfseries Rapport Aide à la résolution de Kakuro}\\[0.4cm]
\HRule \\[1cm]
\begin{minipage}{\textwidth}
	\begin{flushright} \huge
		\center
		Compléments de POO
	\end{flushright}
\end{minipage}\\[1cm]
\textsc{\large }\\[1cm]
\begin{minipage}{\textwidth}
	\begin{flushright} \large
		\center
		PIGNARD Alexandre - 21701890\\BOCAGE Arthur - 21806332
		\\[1cm]
		L3 Informatique - Promotion 2020-2021
	\end{flushright}
\end{minipage}
\textsc{\large }\\[2cm]
{\large \today}\\[0.5cm]
\vfill
\end{titlepage}

\thispagestyle{empty}
\setcounter{page}{0}
\newpage

\tableofcontents
\newpage


\section{Introduction}
Le \textbf{Kakuro} est un jeu logique semblable aux mots croisés. Le jeu est originaire du Jpaon où sa popularité est immense. Le jeu est similaire aux mots fléchés dans lesquels une même combinaison de chiffres ne peut être utilisé deux fois dans la même grille. Bien que le jeu ne soit parvenu en France que vers les années 2004 et 2005 dans le sillage du sudoku, le jeu reste connu depuis longtemps. \\ \\ Source : Wikipedia \\ \\
Le but de ce projet est de créer un logiciel permettant de fournir une aide à la résolution de grilles de kakuro, il ne s'agit pas de proposer une résolution automatique mais de fournir des outils à un joueur afin qu'il résolve de lui même une grille de jeu. \\\ \\
Pour réaliser ce projet, nous avons choisi de l'écrire en Python, langage que nous maitrisions et qui nous offre un large panel de possibilités que cela soit pour réaliser les différentes fonctions dont nous avions besoin mais aussi pour les choix d'interfaces graphiques que nous avions à notre disposition grâce à ce langage. 
\section{Utilisation du programme}
Pour utiliser notre programme, vous pouvez vous rendre dans le répertoire $Kakuro$\_$Helper$ et lancer la commande :
\begin{lstlisting}[language=bash]
  $ python3 Main.py
\end{lstlisting}
Afin d'éxecuter le logiciel il faut avoir installé Python 3 sur sa machine ainsi que PyQt5 et pickle, l'interface graphique que nous avons utilisés. Si ces dépendances sont installées, le logiciel devrait fonctionner sur Linux, Winwows et Mac Os.

\newpage
\section{Conception du programme : Back-end}
Le projet est divisé en deux grosses parties, la première est le back-en et se trouve dans le répertoire du même nom. La deuxième est le front-end et se trouve elle aussi dans un répertoire qui porte son nom.
\\ \\
Le code présent dans le répertoire back-end constitue le cœur du logiciel. Il correspond aux méthodes qui vont permettre de créer un grille, y associer des valeurs à jouer ou  encore une "heat map". Il s'agit du travail en arrière plan que l'utilisateur ne verra pas et qui sera utilisé par la partie front-end pour interagir avec l'utilisateur.
Le back-end correspond à la partie que l'utilisateur ne verra pas, il s'agit du travail en arrière plan que le front-end va afficher à l'utilisateur. \\ \\ 
Le back-end est constitué de deux sous parties : la partie Logic et les Ressources qui pourront être utilisées. \\ \\
La partie Logic contient les fonctions du logiciel et la partie Ressources contient, comme son nom l'indique, les ressources nécessaires au bon fonctionnement du back-end (dictionnaire des sommes).

 

\subsection{Grid$\_$Logic: la création de la grille}
Le fichier $Grid$\_$Logic.py$ est le fichier Python qui va permettre de créer la grille de Kakuro. \\ La grille est générée de façon assez classique : il s'agit de listes dans lesquels on trouve d'autres listes. \\
La méthode $grid$\_$Maker$\_$Creator$ permet de créer une grille vide et la rempli avec une liste d'instructions. \\
Dans notre logiciel, une grille classique est constituée de six fois six cases, soit trente-six cases. Chaque case est en fait un tableau on a donc trente-six tableaux. \\
\newpage
Il y a six types de case : \\ \\
\begin{enumerate}
\item[] Case jouable/non jouable
\item[] Case de type "heat" (utilisée pour la heat map qui sera détaillée plus loin)
\item[] Liste des objectifs de la case
\item[] Liste des valeurs possibles de la case
\item[] Liste des valeures Contraintes
\item[] Case sélectionnée
\end{enumerate} 

\subsection{Heat$\_$Mapping$\_$Logic : coloration d'une grille}

Le fichier $Heat$\_$Mapping$\_$Logic.py$ contient les fonctions qui vont nous permettre de réaliser une "heat map". Il s'agit de la coloration de la grille qui va permettre de mettre en avant certaines cases en fonction de leur potentiel. Concrètement, plus une case est intéressante à jouer plus elle sera colorée. \\
Pour ce faire, dans le tableau une valeur sera attribuée en fonction du nombre de cases libres dans chaque lignes de la grille. Cette valeur est un poids, plus elle est élevée et plus la case sera colorée sur l'interface graphique.  \\ \\

Le fichier est constitué des fonctions suivantes : \\
\begin{itemize}

\item[]$heat$\_$Mapping$\_$Row$ : elle permet de parcourir les cases via un double for, quand elle trouve des cases libres dans  une ligne elle incrémente le poids. \\

\item[]$heat$\_$Mapping$\_$Column$ : même fonctionnement que la fonction ci-dessus mais parcours dans le sens des colonnes. \\

\item[]$Set$\_$Heat$\_$Mapping$ : permet de définir le poids de bases et de retourner le Kakuro coloré.\\
\end{itemize}

\subsection{Possible$\_$Values$\_$Mapping$\_$Logic : guide du remplissage des cases}
Le fichier $Possible$\_$Values$\_$Mapping$\_$Logic.py$ permet de créer le système de recommandation de coups à jouer. C'est ce qui permet d'afficher dans des cases vides la recommandation de chiffres à placer. \\ \\
C'est l'un des fichier le plus important car il contient la fonction qui permet de charger la ressource sums.pkl. \\ \\

Les fonctions $objective$\_$Propagation$\_$Row$ et $objective$\_$Propagation$\_$Row$ permettent de parcourir la grille (verticalement et horizontalement) et permettent d'attribuer des valeurs dans le Kakuro en fonction des lignes. \\
Ces deux fonctions sont executées par la methode $set$\_$Objective$\_$Propagation$. \\ \\
Quant à la méthode $findCommonNumberForLenght$, elle permet de créer deux tableaux constitué des solutions possibles à la résolution d'une ligne de Kakuro et ce en parcourant la grille horizontalement et verticalement. Cette méthode est appelée dans $set$\_$Possible$\_$Values$\_$Mapping$. 

\subsection{Saving$\_$Logic : le fichier de sauvegarde}
Sans le fichier $Saving$\_$Logic.py$ la sauvegarde et le chargement de Kakuro serait impossible car c'est ce fichier qui permet de les gérer. \\
Le code utilise le module pickle pour ce faire et utilise des fichiers au format $.pkl$.  \\
Il y a deux méthodes de chargement : $load$\_$Default$\_$Save$ qui va permettre de charger un fichier du nom de "save.pkl". On ne peut pas choisir de fichier en particulier. La deuxième méthode de chargement (très similaire) est $load$\_$Kakuro$\_$From$\_$File$, qui prend en argument le nom d'un fichier et qui l'ouvre. \\
La méthode $push$\_$Save$ permet d'écrire un fichier au format $.pkl$ du nom de $save.pkl$. \\ \\
\newpage
La méthode $dynamic$\_$Load$ permet de charger un fichier de la façon suivante : \\
\begin{enumerate}
\item[-] Vérifie si un fichier "save" est disponible\\
\item[-] Si aucun fichier n'est trouvé alors un Kakuro dit "basique" est crée (il s'agit d'un Kakuro tout prêt fait). \\
\item[-] En revanche, si un fichier "save" est trouvé, alors on le charge.\\
\end{enumerate}

$get$\_$All$\_$Saves$ permet quand à elle de renvoyer les nom de tous les fichiers présents dans le dossier $Saves$.







\newpage
\section{Conception du programme : Front-end}
Dans notre logiciel, le front-end sert d'interface homme-machine afin de proposer une grille simple et de permettre à l'utilisateur d'interagir avec cette dernière via des boutons notamment. \\ \\
L'interface graphique a été réalisée grâce à l'outil $PyQt5$. Cette dernière est divisée en plusieurs fenêtres (que l'on appellera windows, de leur nom en anglais et dans les fichiers) et qui permettront d'exécuter des tâches spécifiques que nous détaillerons plus loin. \\ \\
Voici la liste de ces fenêtres : \\

\begin{enumerate}
\item[-] Une fenêtre d'accueil permettant de sélectionner une grille  \\
\item[-] Une fenêtre de jeu permettant d'avoir accès aux options d'aide à la résolution de la grille de Kakuro que l'on aura sélectionné. \\
\item[-] Une fenêtre de création de grille qui permettra de créer et sauvegarder sa propre grille de Kakuro. \\
Enfin, c'est dans la partie $Front$\_$End$ que l'on trouve les dossiers de sauvegardes, à savoir $Save$ et $Save$\_$Creator$\_$Result$. \\
\end{enumerate}

Pour ce qui est du style de l'interface graphique nous avons opté pour un design simple et sombre (pour préserver le confort des yeux) qui permet de se concentrer sur la grille et les fonctionnalités proposées. On a donc une palette de couleurs allant du gris foncé au gris clair et du orange pastel pour la heat map.

\subsection{Main$\_$Window}
\subsection{Solver$\_$Window}
\subsection{Loader$\_$Window}
\subsection{Creator$\_$Window}
\subsection{Dossiers de sauvegardes}

\section{Le logiciel dans son ensemble}
\section{Améliorations possibles}


\section{Annexes}



\end{document}

